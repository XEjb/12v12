modifier_fountain_invulnerability_custom = class({})

function modifier_fountain_invulnerability_custom:IsPurgable() return false end
function modifier_fountain_invulnerability_custom:GetAttributes() return MODIFIER_ATTRIBUTE_PERMANENT + MODIFIER_ATTRIBUTE_IGNORE_INVULNERABLE end
function modifier_fountain_invulnerability_custom:StatusEffectPriority() return 9999999 end

function modifier_fountain_invulnerability_custom:GetStatusEffectName()
	return "particles/status_fx/status_effect_dark_willow_shadow_realm.vpcf"
end

function modifier_fountain_invulnerability_custom:CheckState()
	return {
		[MODIFIER_STATE_INVULNERABLE] = true,
		[MODIFIER_STATE_OUT_OF_GAME] = true,
		[MODIFIER_STATE_CANNOT_BE_MOTION_CONTROLLED] = true,
	}
end

if IsClient() then return end

function modifier_fountain_invulnerability_custom:OnCreated()
	self.parent = self:GetParent()
	self.created_origin = self.parent:GetAbsOrigin()

	self:StartIntervalThink(0.5)
end

function modifier_fountain_invulnerability_custom:OnIntervalThink()
	if self.created_origin ~= self.parent:GetAbsOrigin() then
		self:Destroy()
	end
end
